<div class="table-detail-container">
  <!-- Loading state using signal -->
  @if (loading()) {
    <div class="loading-spinner">
      <p>Loading table details...</p>
    </div>
  }

  @if (error()) {
    <div class="error-message">
      <p>{{ error() }}</p>
      <button (click)="onClearError()" class="btn-secondary">
        Clear Error
      </button>
    </div>
  }

  @if (table && !loading()) {
    <div class="table-content">
      <header class="table-header">
        <h1>{{ table.name }}</h1>
        <button mat-flat-button routerLink="/table" class="btn-secondary">
          Back
        </button>
      </header>

      <div class="table-info">
        <div class="info-row">
          <span class="label">Table ID:</span>
          <span>{{ table.id }}</span>
        </div>

        <div class="info-row">
          <span class="label">Table Name:</span>
          <span>{{ table.name }}</span>
        </div>

        @if (table.columns && table.columns.length > 0) {
          <div class="columns-section">
            <h3>Columns</h3>
            <div class="columns-list">
              <mat-list>
                @for (column of table.columns; track column.id) {
                  <mat-list-item>
                    <span matListItemTitle>{{ column.name }} </span>
                    <span matListItemLine>{{ column.data_type }}</span>
                  </mat-list-item>
                }
              </mat-list>
            </div>
          </div>
        }
      </div>
    </div>
  }

  @if (!table && !loading() && !error()) {
    <div class="no-table-message">
      <p>No table selected. Please select a table to view details.</p>
    </div>
  }
</div>
